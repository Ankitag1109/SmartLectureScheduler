{"ast":null,"code":"// src/pages/RoleBasedLogin.jsx\nimport React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RoleBasedLogin=()=>{const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[role,setRole]=useState(\"admin\");// default role\nconst[error,setError]=useState(\"\");const navigate=useNavigate();const handleLogin=async e=>{e.preventDefault();try{// Determine API endpoint based on role\nconst endpoint=role===\"admin\"?\"http://localhost:5000/api/admin/login\":\"http://localhost:5000/api/instructor/login\";const res=await fetch(endpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email,password})});const data=await res.json();if(!res.ok){setError(data.message||\"Login failed\");return;}// Save token and user info in localStorage based on role\nif(role===\"admin\"){localStorage.setItem(\"token\",data.token);localStorage.setItem(\"role\",\"admin\");localStorage.setItem(\"adminData\",JSON.stringify(data.admin));navigate(\"/admin/dashboard\");}else{localStorage.setItem(\"token\",data.token);localStorage.setItem(\"role\",\"instructor\");localStorage.setItem(\"instructorData\",JSON.stringify(data.instructor));localStorage.setItem(\"name\",data.instructor.name);navigate(\"/instructor/dashboard\");}}catch(err){console.error(err);setError(\"Something went wrong. Try again.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-100\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"bg-white p-8 rounded shadow-md w-full max-w-sm\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-center\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 mb-4\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-1 font-medium\",children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{value:role,onChange:e=>setRole(e.target.value),className:\"w-full p-2 border rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"instructor\",children:\"Instructor\"})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),className:\"w-full p-2 mb-4 border rounded\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full p-2 mb-4 border rounded\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition-colors\",children:\"Login\"})]})});};export default RoleBasedLogin;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","RoleBasedLogin","email","setEmail","password","setPassword","role","setRole","error","setError","navigate","handleLogin","e","preventDefault","endpoint","res","fetch","method","headers","body","JSON","stringify","data","json","ok","message","localStorage","setItem","token","admin","instructor","name","err","console","className","children","onSubmit","value","onChange","target","type","placeholder","required"],"sources":["C:/Users/Ankita Gaikwad/Desktop/placement/Assesment/smart-lecture-scheduler/client/src/pages/RoleBasedLogin.jsx"],"sourcesContent":["// src/pages/RoleBasedLogin.jsx\r\nimport React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst RoleBasedLogin = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [role, setRole] = useState(\"admin\"); // default role\r\n  const [error, setError] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      // Determine API endpoint based on role\r\n      const endpoint =\r\n        role === \"admin\"\r\n          ? \"http://localhost:5000/api/admin/login\"\r\n          : \"http://localhost:5000/api/instructor/login\";\r\n\r\n      const res = await fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setError(data.message || \"Login failed\");\r\n        return;\r\n      }\r\n\r\n      // Save token and user info in localStorage based on role\r\n      if (role === \"admin\") {\r\n        localStorage.setItem(\"token\", data.token);\r\n        localStorage.setItem(\"role\", \"admin\");\r\n        localStorage.setItem(\"adminData\", JSON.stringify(data.admin));\r\n        navigate(\"/admin/dashboard\");\r\n      } else {\r\n        localStorage.setItem(\"token\", data.token);\r\n        localStorage.setItem(\"role\", \"instructor\");\r\n        localStorage.setItem(\"instructorData\", JSON.stringify(data.instructor));\r\n        localStorage.setItem(\"name\", data.instructor.name);\r\n        navigate(\"/instructor/dashboard\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Something went wrong. Try again.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n      <form\r\n        onSubmit={handleLogin}\r\n        className=\"bg-white p-8 rounded shadow-md w-full max-w-sm\"\r\n      >\r\n        <h2 className=\"text-2xl font-bold mb-6 text-center\">Login</h2>\r\n\r\n        {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n\r\n        <div className=\"mb-4\">\r\n          <label className=\"block mb-1 font-medium\">Role</label>\r\n          <select\r\n            value={role}\r\n            onChange={(e) => setRole(e.target.value)}\r\n            className=\"w-full p-2 border rounded\"\r\n          >\r\n            <option value=\"admin\">Admin</option>\r\n            <option value=\"instructor\">Instructor</option>\r\n          </select>\r\n        </div>\r\n\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className=\"w-full p-2 mb-4 border rounded\"\r\n          required\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          className=\"w-full p-2 mb-4 border rounded\"\r\n          required\r\n        />\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition-colors\"\r\n        >\r\n          Login\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoleBasedLogin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}